{% extends "base.html" %}

{% block title %}
  Math Games
{% endblock %}

{% block content %}
<div id="math-games-content" class="jumbotron">
  <h1 class="display-4">Welcome to Math Games!</h1>
  <p class="lead">Choose from a variety of fun and educational math games to sharpen your skills.</p>
  <hr class="my-4">
  <p>Start playing now!</p>
  <a id="play-now-btn" class="btn btn-primary btn-lg" href="#" role="button">Play Now</a>
</div>

<div id="math-game" style="display: none;">
  <div class="card">
    <div class="card-header">
      <h5 class="card-title">Calculus Problem</h5>
    </div>
    <div class="card-body">
      <p class="card-text">Find the derivative of the function f(x) = 3x^2 + 2x + 1.</p>
      <form>
        <div class="form-group">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="answer" id="optionA" value="optionA">
            <label class="form-check-label" for="optionA">
              A) 3x^2
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="answer" id="optionB" value="optionB">
            <label class="form-check-label" for="optionB">
              B) 6x + 2
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="answer" id="optionC" value="optionC">
            <label class="form-check-label" for="optionC">
              C) 9x + 2
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="answer" id="optionD" value="optionD">
            <label class="form-check-label" for="optionD">
              D) 6x^2 + 2
            </label>
          </div>
        </div>
        <button type="button" class="btn btn-primary" id="submit-btn">Submit</button>
        <br/>
        <br/>
        <button type="button" class="btn btn-primary" id="next-btn" style="display: none;">Next</button>
      </form>
    </div>
  </div>
</div>

<!-- Placeholder to display points -->
<p id="points" style="display: none;"></p>

<script>
// Initialize points variable
var points = 0;

document.getElementById("play-now-btn").addEventListener("click", function() {
  // Hide the math-games-content div
  document.getElementById("math-games-content").style.display = "none";

  // Show the math-game div
  document.getElementById("math-game").style.display = "block";
});

document.getElementById("submit-btn").addEventListener("click", function() {
  var answer = document.querySelector('input[name="answer"]:checked').value;
  if (answer === "optionB") {
    // If answer is correct, increase points
    points += 10; // You can adjust the points earned as needed
    alert("Correct! You found the derivative of the function.");
    document.getElementById("next-btn").style.display = "block";
    // Call function to display points
    displayPoints();
  } else {
    alert("Incorrect. Please try again.");
    document.getElementById("next-btn").style.display = "none";
  }
});

document.getElementById("next-btn").addEventListener("click", function() {
  // Add logic to display the next question or game

  alert("Next question of game will be displayed.");
});

// Function to display points
function displayPoints() {
  // Show the points element
  document.getElementById("points").style.display = "block";
  // Update the points text
  document.getElementById("points").innerText = "Points: " + points;
}
</script>
{% endblock %}
